{"ast":null,"code":"import _classCallCheck from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{firebase}from'../../../firebase';import FileUploader from'react-firebase-file-uploader';var Uploader=/*#__PURE__*/function(_Component){_inherits(Uploader,_Component);var _super=_createSuper(Uploader);function Uploader(){var _this;_classCallCheck(this,Uploader);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={name:'',isUploading:false,progress:0,fileURL:''};_this.handleUploadStart=function(){_this.setState({isUploading:true,progress:0});};_this.handleUploadError=function(error){_this.setState({isUploading:false});console.log(error);};_this.handleProgress=function(progress){_this.setState({progress:progress});};_this.handleUploadSuccess=function(filename){_this.setState({name:filename,progress:100,isUploading:false});///\nfirebase.storage().ref('images').child(filename).getDownloadURL().then(function(url){_this.setState({fileURL:url});});_this.props.filename(filename);};return _this;}_createClass(Uploader,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(FileUploader,{accept:\"image/*\",name:\"image\",randomizeFilename:true,storageRef:firebase.storage().ref('images'),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleUploadSuccess,onProgress:this.handleProgress}),this.state.isUploading?/*#__PURE__*/React.createElement(\"p\",null,\"Progress:\",this.state.progress):null,this.state.fileURL?/*#__PURE__*/React.createElement(\"img\",{style:{width:'300px'},src:this.state.fileURL,alt:this.state.fileURL}):null);}}]);return Uploader;}(Component);export default Uploader;","map":{"version":3,"sources":["/Users/heesoopark/Desktop/myprj/src/components/widgets/FileUploader/fileUploader.js"],"names":["React","Component","firebase","FileUploader","Uploader","state","name","isUploading","progress","fileURL","handleUploadStart","setState","handleUploadError","error","console","log","handleProgress","handleUploadSuccess","filename","storage","ref","child","getDownloadURL","then","url","props","width"],"mappings":"wkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,mBAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,C,GAGMC,CAAAA,Q,mUAEFC,K,CAAQ,CACJC,IAAI,CAAC,EADD,CAEJC,WAAW,CAAC,KAFR,CAGJC,QAAQ,CAAC,CAHL,CAIJC,OAAO,CAAC,EAJJ,C,OAORC,iB,CAAoB,UAAM,CACtB,MAAKC,QAAL,CAAc,CAAEJ,WAAW,CAAC,IAAd,CAAmBC,QAAQ,CAAC,CAA5B,CAAd,EACH,C,OAEDI,iB,CAAoB,SAACC,KAAD,CAAW,CAC3B,MAAKF,QAAL,CAAc,CAACJ,WAAW,CAAC,KAAb,CAAd,EACAO,OAAO,CAACC,GAAR,CAAYF,KAAZ,EACH,C,OAEDG,c,CAAiB,SAACR,QAAD,CAAc,CAC3B,MAAKG,QAAL,CAAc,CACVH,QAAQ,CAARA,QADU,CAAd,EAGH,C,OAEDS,mB,CAAsB,SAACC,QAAD,CAAc,CAEhC,MAAKP,QAAL,CAAc,CACVL,IAAI,CAAEY,QADI,CAEVV,QAAQ,CAAC,GAFC,CAGVD,WAAW,CAAC,KAHF,CAAd,EAKA;AACAL,QAAQ,CAACiB,OAAT,GAAmBC,GAAnB,CAAuB,QAAvB,EACCC,KADD,CACOH,QADP,EACiBI,cADjB,GAECC,IAFD,CAEO,SAAAC,GAAG,CAAI,CACV,MAAKb,QAAL,CAAc,CAACF,OAAO,CAACe,GAAT,CAAd,EACH,CAJD,EAMA,MAAKC,KAAL,CAAWP,QAAX,CAAoBA,QAApB,EAEH,C,2EAIO,CACJ,mBACI,4CACI,oBAAC,YAAD,EACI,MAAM,CAAC,SADX,CAEI,IAAI,CAAC,OAFT,CAGI,iBAAiB,KAHrB,CAII,UAAU,CAAEhB,QAAQ,CAACiB,OAAT,GAAmBC,GAAnB,CAAuB,QAAvB,CAJhB,CAKI,aAAa,CAAE,KAAKV,iBALxB,CAMI,aAAa,CAAE,KAAKE,iBANxB,CAOI,eAAe,CAAE,KAAKK,mBAP1B,CAQI,UAAU,CAAE,KAAKD,cARrB,EADJ,CAWM,KAAKX,KAAL,CAAWE,WAAX,cACE,yCAAa,KAAKF,KAAL,CAAWG,QAAxB,CADF,CAEG,IAbT,CAeM,KAAKH,KAAL,CAAWI,OAAX,cACE,2BAAK,KAAK,CAAE,CACRiB,KAAK,CAAC,OADE,CAAZ,CAEG,GAAG,CAAE,KAAKrB,KAAL,CAAWI,OAFnB,CAE4B,GAAG,CAAE,KAAKJ,KAAL,CAAWI,OAF5C,EADF,CAII,IAnBV,CADJ,CAyBH,C,sBAtEkBR,S,EA0EvB,cAAeG,CAAAA,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport { firebase } from '../../../firebase';\nimport FileUploader from 'react-firebase-file-uploader';\n\n\nclass Uploader extends Component {\n\n    state = {\n        name:'',\n        isUploading:false,\n        progress:0,\n        fileURL:''\n    }\n\n    handleUploadStart = () => {\n        this.setState({ isUploading:true,progress:0})\n    }\n\n    handleUploadError = (error) => {\n        this.setState({isUploading:false})\n        console.log(error)\n    }\n\n    handleProgress = (progress) => {\n        this.setState({\n            progress\n        })\n    }\n\n    handleUploadSuccess = (filename) => {\n        \n        this.setState({\n            name: filename,\n            progress:100,\n            isUploading:false\n        })\n        ///\n        firebase.storage().ref('images')\n        .child(filename).getDownloadURL()\n        .then( url => {\n            this.setState({fileURL:url})\n        })\n\n        this.props.filename(filename)\n\n    }\n\n\n\n    render(){\n        return(\n            <div>\n                <FileUploader\n                    accept=\"image/*\"\n                    name=\"image\"\n                    randomizeFilename\n                    storageRef={firebase.storage().ref('images')}\n                    onUploadStart={this.handleUploadStart}\n                    onUploadError={this.handleUploadError}\n                    onUploadSuccess={this.handleUploadSuccess}\n                    onProgress={this.handleProgress}\n                />\n                { this.state.isUploading ? \n                    <p>Progress:{this.state.progress}</p>\n                    :null\n                }\n                { this.state.fileURL ? \n                    <img style={{\n                        width:'300px'\n                    }} src={this.state.fileURL} alt={this.state.fileURL}/>\n                    : null\n                }\n        \n            </div>\n        )\n    }\n\n}\n\nexport default Uploader;"]},"metadata":{},"sourceType":"module"}