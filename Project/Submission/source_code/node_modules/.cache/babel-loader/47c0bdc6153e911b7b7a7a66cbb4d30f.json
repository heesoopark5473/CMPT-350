{"ast":null,"code":"import _classCallCheck from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{CSSTransition,TransitionGroup}from'react-transition-group';import{Link}from'react-router-dom';import axios from'axios';import ReactModal from'react-modal';import{NEWS_URL,NEWS_KEY}from'../../../config';import style from'./newsList.module.css';import Button from'../Buttons/buttons';import ListInfo from'../../widgets/ListInfo/listInfo';import Header from'./header';var NewsList=/*#__PURE__*/function(_Component){_inherits(NewsList,_Component);var _super=_createSuper(NewsList);function NewsList(){var _this;_classCallCheck(this,NewsList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={items:[],country:_this.props.country,city:_this.props.city,category:_this.props.category,amount:_this.props.amount,showModal:false,clickedItem:[]};_this.loadMore=function(){_this.setState({amount:_this.state.amount+5});// this.state.amount = this.state.amount + 5;\n_this.request(_this.request(_this.state.country,_this.state.city,_this.state.category,_this.state.amount));};_this.request=function(country,city,category,amount){axios.get(\"\".concat(NEWS_URL,\"country=\").concat(country,\"&category=\").concat(category,\"&pageSize=\").concat(amount,\"&q=\").concat(city,\"&apiKey=\").concat(NEWS_KEY)).then(function(response){_this.setState({items:response.data.articles});});};_this.renderNews=function(type){var template=null;switch(type){case'detail':template=_this.state.items.map(function(item,i){return/*#__PURE__*/React.createElement(CSSTransition,{classNames:{enter:style.newsList_wrapper,enterActive:style.newsList_wrapper_enter},timeout:500,key:i},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:style.newslist_item,onClick:function onClick(){return _this.handleOpenModal(item);}},/*#__PURE__*/React.createElement(ListInfo,{provider:item.source.name,date:item.publishedAt}),/*#__PURE__*/React.createElement(\"h2\",null,item.title))));});break;case'cardMain':template=_this.state.items.map(function(item,i){return/*#__PURE__*/React.createElement(CSSTransition,{classNames:{enter:style.newsList_wrapper,enterActive:style.newsList_wrapper_enter},timeout:500,key:i},/*#__PURE__*/React.createElement(\"div\",{className:style.flex_wrapper,onClick:function onClick(){return _this.handleOpenModal(item);}},/*#__PURE__*/React.createElement(\"div\",{className:style.left,style:{background:\"url(\".concat(item.urlToImage,\")\")}},/*#__PURE__*/React.createElement(\"div\",null)),/*#__PURE__*/React.createElement(\"div\",{className:style.right},/*#__PURE__*/React.createElement(ListInfo,{provider:item.source.name,date:item.publishedAt}),/*#__PURE__*/React.createElement(\"h2\",null,item.title))));});break;default:template=null;}return template;};return _this;}_createClass(NewsList,[{key:\"componentWillMount\",value:function componentWillMount(){this.handleOpenModal=this.handleOpenModal.bind(this);this.handleCloseModal=this.handleCloseModal.bind(this);this.request(this.state.country,this.state.city,this.state.category,this.state.amount);}},{key:\"handleOpenModal\",value:function handleOpenModal(item){this.setState({clickedItem:item});this.setState({showModal:true});}},{key:\"handleCloseModal\",value:function handleCloseModal(){this.setState({showModal:false});}},{key:\"render\",value:function render(){var _this2=this;var header;var body;if(this.state.clickedItem.content==null){body=this.state.clickedItem.description;}else{body=this.state.clickedItem.content;}if(this.state.clickedItem.author==null){header=/*#__PURE__*/React.createElement(Header,{date:this.state.clickedItem.publishedAt,source:this.state.clickedItem.source,author:\"N/A\",title:this.state.clickedItem.title,url:this.state.clickedItem.url});}else{header=/*#__PURE__*/React.createElement(Header,{date:this.state.clickedItem.publishedAt,source:this.state.clickedItem.source,author:this.state.clickedItem.author,title:this.state.clickedItem.title,url:this.state.clickedItem.url});}return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactModal,{isOpen:this.state.showModal,contentLabel:\"Minimal Modal Example\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleCloseModal},\"Close\"),/*#__PURE__*/React.createElement(\"div\",{className:style.articleWrapper},header,/*#__PURE__*/React.createElement(\"div\",{className:style.articleBody},/*#__PURE__*/React.createElement(\"h1\",null,this.state.clickedItem.title),/*#__PURE__*/React.createElement(\"div\",{className:style.articleImage,style:{background:\"url(\".concat(this.state.clickedItem.urlToImage,\")\")}}),/*#__PURE__*/React.createElement(\"div\",{className:style.articleText},body)))),/*#__PURE__*/React.createElement(TransitionGroup,{component:\"div\",className:\"list\"},this.renderNews(this.props.type)),/*#__PURE__*/React.createElement(Button,{type:\"loadmore\",loadMore:function loadMore(){return _this2.loadMore();},cta:\"Load More News\"}));}}]);return NewsList;}(Component);export default NewsList;","map":{"version":3,"sources":["/Users/heesoopark/Desktop/myprj/src/components/widgets/NewsList/newsList.js"],"names":["React","Component","CSSTransition","TransitionGroup","Link","axios","ReactModal","NEWS_URL","NEWS_KEY","style","Button","ListInfo","Header","NewsList","state","items","country","props","city","category","amount","showModal","clickedItem","loadMore","setState","request","get","then","response","data","articles","renderNews","type","template","map","item","i","enter","newsList_wrapper","enterActive","newsList_wrapper_enter","newslist_item","handleOpenModal","source","name","publishedAt","title","flex_wrapper","left","background","urlToImage","right","bind","handleCloseModal","header","body","content","description","author","url","articleWrapper","articleBody","articleImage","articleText"],"mappings":"wkBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,CAAwBC,eAAxB,KAA+C,wBAA/C,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,aAAvB,CAEA,OAASC,QAAT,CAAmBC,QAAnB,KAAmC,iBAAnC,CACA,MAAOC,CAAAA,KAAP,KAAkB,uBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,iCAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,UAAnB,C,GAEMC,CAAAA,Q,mUAEFC,K,CAAQ,CACJC,KAAK,CAAC,EADF,CAEJC,OAAO,CAAE,MAAKC,KAAL,CAAWD,OAFhB,CAGJE,IAAI,CAAE,MAAKD,KAAL,CAAWC,IAHb,CAIJC,QAAQ,CAAE,MAAKF,KAAL,CAAWE,QAJjB,CAKJC,MAAM,CAAE,MAAKH,KAAL,CAAWG,MALf,CAMJC,SAAS,CAAE,KANP,CAOJC,WAAW,CAAE,EAPT,C,OAgBRC,Q,CAAU,UAAM,CACZ,MAAKC,QAAL,CAAc,CAACJ,MAAM,CAAE,MAAKN,KAAL,CAAWM,MAAX,CAAkB,CAA3B,CAAd,EACA;AACA,MAAKK,OAAL,CAAa,MAAKA,OAAL,CAAa,MAAKX,KAAL,CAAWE,OAAxB,CAAiC,MAAKF,KAAL,CAAWI,IAA5C,CAAkD,MAAKJ,KAAL,CAAWK,QAA7D,CAAuE,MAAKL,KAAL,CAAWM,MAAlF,CAAb,EACH,C,OAEDK,O,CAAU,SAACT,OAAD,CAAUE,IAAV,CAAgBC,QAAhB,CAA0BC,MAA1B,CAAsC,CAC5Cf,KAAK,CAACqB,GAAN,WAAanB,QAAb,oBAAgCS,OAAhC,sBAAoDG,QAApD,sBAAyEC,MAAzE,eAAqFF,IAArF,oBAAoGV,QAApG,GACCmB,IADD,CACO,SAAAC,QAAQ,CAAI,CACf,MAAKJ,QAAL,CAAc,CACVT,KAAK,CAACa,QAAQ,CAACC,IAAT,CAAcC,QADV,CAAd,EAGH,CALD,EAMH,C,OAUDC,U,CAAa,SAACC,IAAD,CAAU,CACnB,GAAIC,CAAAA,QAAQ,CAAG,IAAf,CACA,OAAOD,IAAP,EACI,IAAK,QAAL,CACIC,QAAQ,CAAG,MAAKnB,KAAL,CAAWC,KAAX,CAAiBmB,GAAjB,CAAsB,SAACC,IAAD,CAAOC,CAAP,qBAC7B,oBAAC,aAAD,EACI,UAAU,CAAE,CACRC,KAAK,CAAC5B,KAAK,CAAC6B,gBADJ,CAERC,WAAW,CAAC9B,KAAK,CAAC+B,sBAFV,CADhB,CAKI,OAAO,CAAE,GALb,CAMI,GAAG,CAAEJ,CANT,eAQI,4CACI,2BAAK,SAAS,CAAE3B,KAAK,CAACgC,aAAtB,CAAqC,OAAO,CAAE,yBAAK,OAAKC,eAAL,CAAqBP,IAArB,CAAL,EAA9C,eAQQ,oBAAC,QAAD,EAAU,QAAQ,CAAEA,IAAI,CAACQ,MAAL,CAAYC,IAAhC,CAAsC,IAAI,CAAET,IAAI,CAACU,WAAjD,EARR,cASQ,8BAAKV,IAAI,CAACW,KAAV,CATR,CADJ,CARJ,CAD6B,EAAtB,CAAX,CA0BA,MACJ,IAAK,UAAL,CACIb,QAAQ,CAAG,MAAKnB,KAAL,CAAWC,KAAX,CAAiBmB,GAAjB,CAAsB,SAACC,IAAD,CAAOC,CAAP,qBAC7B,oBAAC,aAAD,EACI,UAAU,CAAE,CACRC,KAAK,CAAC5B,KAAK,CAAC6B,gBADJ,CAERC,WAAW,CAAC9B,KAAK,CAAC+B,sBAFV,CADhB,CAKI,OAAO,CAAE,GALb,CAMI,GAAG,CAAEJ,CANT,eAcQ,2BAAK,SAAS,CAAE3B,KAAK,CAACsC,YAAtB,CAAoC,OAAO,CAAE,yBAAK,OAAKL,eAAL,CAAqBP,IAArB,CAAL,EAA7C,eACI,2BAAK,SAAS,CAAE1B,KAAK,CAACuC,IAAtB,CACI,KAAK,CAAE,CACHC,UAAU,eAASd,IAAI,CAACe,UAAd,KADP,CADX,eAII,+BAJJ,CADJ,cAOI,2BAAK,SAAS,CAAEzC,KAAK,CAAC0C,KAAtB,eACI,oBAAC,QAAD,EAAU,QAAQ,CAAEhB,IAAI,CAACQ,MAAL,CAAYC,IAAhC,CAAsC,IAAI,CAAET,IAAI,CAACU,WAAjD,EADJ,cAEI,8BAAKV,IAAI,CAACW,KAAV,CAFJ,CAPJ,CAdR,CAD6B,EAAtB,CAAX,CA8BA,MACJ,QACIb,QAAQ,CAAC,IAAT,CA9DR,CAgEA,MAAOA,CAAAA,QAAP,CACH,C,mGAhGmB,CAChB,KAAKS,eAAL,CAAuB,KAAKA,eAAL,CAAqBU,IAArB,CAA0B,IAA1B,CAAvB,CACA,KAAKC,gBAAL,CAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB,CACA,KAAK3B,OAAL,CAAa,KAAKX,KAAL,CAAWE,OAAxB,CAAiC,KAAKF,KAAL,CAAWI,IAA5C,CAAkD,KAAKJ,KAAL,CAAWK,QAA7D,CAAuE,KAAKL,KAAL,CAAWM,MAAlF,EACH,C,wDAiBee,I,CAAM,CAClB,KAAKX,QAAL,CAAc,CAACF,WAAW,CAAEa,IAAd,CAAd,EACA,KAAKX,QAAL,CAAc,CAACH,SAAS,CAAE,IAAZ,CAAd,EACH,C,2DACkB,CACf,KAAKG,QAAL,CAAc,CAACH,SAAS,CAAE,KAAZ,CAAd,EACH,C,uCAuEQ,iBACL,GAAIiC,CAAAA,MAAJ,CACA,GAAIC,CAAAA,IAAJ,CACA,GAAG,KAAKzC,KAAL,CAAWQ,WAAX,CAAuBkC,OAAvB,EAAkC,IAArC,CAA0C,CACtCD,IAAI,CAAG,KAAKzC,KAAL,CAAWQ,WAAX,CAAuBmC,WAA9B,CACH,CAFD,IAEK,CACDF,IAAI,CAAG,KAAKzC,KAAL,CAAWQ,WAAX,CAAuBkC,OAA9B,CACH,CACD,GAAG,KAAK1C,KAAL,CAAWQ,WAAX,CAAuBoC,MAAvB,EAAiC,IAApC,CAAyC,CACrCJ,MAAM,cAAG,oBAAC,MAAD,EACT,IAAI,CAAE,KAAKxC,KAAL,CAAWQ,WAAX,CAAuBuB,WADpB,CAET,MAAM,CAAE,KAAK/B,KAAL,CAAWQ,WAAX,CAAuBqB,MAFtB,CAGT,MAAM,CAAC,KAHE,CAIT,KAAK,CAAE,KAAK7B,KAAL,CAAWQ,WAAX,CAAuBwB,KAJrB,CAKT,GAAG,CAAE,KAAKhC,KAAL,CAAWQ,WAAX,CAAuBqC,GALnB,EAAT,CAOH,CARD,IAQK,CACDL,MAAM,cAAG,oBAAC,MAAD,EACT,IAAI,CAAE,KAAKxC,KAAL,CAAWQ,WAAX,CAAuBuB,WADpB,CAET,MAAM,CAAE,KAAK/B,KAAL,CAAWQ,WAAX,CAAuBqB,MAFtB,CAGT,MAAM,CAAE,KAAK7B,KAAL,CAAWQ,WAAX,CAAuBoC,MAHtB,CAIT,KAAK,CAAE,KAAK5C,KAAL,CAAWQ,WAAX,CAAuBwB,KAJrB,CAKT,GAAG,CAAE,KAAKhC,KAAL,CAAWQ,WAAX,CAAuBqC,GALnB,EAAT,CAOH,CACD,mBACI,4CACI,oBAAC,UAAD,EACI,MAAM,CAAE,KAAK7C,KAAL,CAAWO,SADvB,CAEI,YAAY,CAAC,uBAFjB,eAII,8BAAQ,OAAO,CAAE,KAAKgC,gBAAtB,UAJJ,cAKI,2BAAK,SAAS,CAAE5C,KAAK,CAACmD,cAAtB,EACKN,MADL,cAEI,2BAAK,SAAS,CAAE7C,KAAK,CAACoD,WAAtB,eACI,8BAAK,KAAK/C,KAAL,CAAWQ,WAAX,CAAuBwB,KAA5B,CADJ,cAEI,2BAAK,SAAS,CAAErC,KAAK,CAACqD,YAAtB,CACI,KAAK,CAAE,CACHb,UAAU,eAAS,KAAKnC,KAAL,CAAWQ,WAAX,CAAuB4B,UAAhC,KADP,CADX,EAFJ,cAOI,2BAAK,SAAS,CAAEzC,KAAK,CAACsD,WAAtB,EACKR,IADL,CAPJ,CAFJ,CALJ,CADJ,cAsBI,oBAAC,eAAD,EACI,SAAS,CAAC,KADd,CAEI,SAAS,CAAC,MAFd,EAIM,KAAKxB,UAAL,CAAiB,KAAKd,KAAL,CAAWe,IAA5B,CAJN,CAtBJ,cA4BI,oBAAC,MAAD,EACI,IAAI,CAAC,UADT,CAEI,QAAQ,CAAE,0BAAI,CAAA,MAAI,CAACT,QAAL,EAAJ,EAFd,CAGI,GAAG,CAAC,gBAHR,EA5BJ,CADJ,CAoCH,C,sBA3KkBtB,S,EA8KvB,cAAeY,CAAAA,QAAf","sourcesContent":["import React, { Component } from 'react';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport ReactModal from 'react-modal';\n\nimport { NEWS_URL, NEWS_KEY } from '../../../config';\nimport style from './newsList.module.css';\nimport Button from '../Buttons/buttons';\nimport ListInfo from '../../widgets/ListInfo/listInfo';\nimport Header from './header';\n\nclass NewsList extends Component {\n    \n    state = {\n        items:[],\n        country: this.props.country,\n        city: this.props.city,\n        category: this.props.category,\n        amount: this.props.amount,\n        showModal: false,\n        clickedItem: []\n    }\n\n    componentWillMount(){\n        this.handleOpenModal = this.handleOpenModal.bind(this);\n        this.handleCloseModal = this.handleCloseModal.bind(this);\n        this.request(this.state.country, this.state.city, this.state.category, this.state.amount)\n    }\n\n    loadMore =() => {\n        this.setState({amount: this.state.amount+5})\n        // this.state.amount = this.state.amount + 5;\n        this.request(this.request(this.state.country, this.state.city, this.state.category, this.state.amount))\n    }\n\n    request = (country, city, category, amount ) => {\n        axios.get(`${NEWS_URL}country=${country}&category=${category}&pageSize=${amount}&q=${city}&apiKey=${NEWS_KEY}`)\n        .then( response => {\n            this.setState({\n                items:response.data.articles\n            })\n        })\n    }\n\n    handleOpenModal(item) {\n        this.setState({clickedItem: item})\n        this.setState({showModal: true})\n    }\n    handleCloseModal() {\n        this.setState({showModal: false})\n    }\n\n    renderNews = (type) => {\n        let template = null;\n        switch(type){\n            case('detail'):\n                template = this.state.items.map( (item, i) => (\n                    <CSSTransition\n                        classNames={{\n                            enter:style.newsList_wrapper,\n                            enterActive:style.newsList_wrapper_enter\n                        }}\n                        timeout={500}\n                        key={i}\n                    >\n                        <div>\n                            <div className={style.newslist_item} onClick={()=> this.handleOpenModal(item)}>\n                                {/* <Link to={{\n                                    pathname: `articles/${i}`,\n                                    state: {\n                                        data: item\n                                    }\n                                }}> */}\n                                {/* <a href={item.url}> */}\n                                    <ListInfo provider={item.source.name} date={item.publishedAt}/>\n                                    <h2>{item.title}</h2>\n                                {/* </a> */}\n                                {/* </Link> */}\n                            </div>\n                        </div>\n                    </CSSTransition>\n                ))\n                break;\n            case('cardMain'):\n                template = this.state.items.map( (item, i) => (\n                    <CSSTransition\n                        classNames={{\n                            enter:style.newsList_wrapper,\n                            enterActive:style.newsList_wrapper_enter\n                        }}\n                        timeout={500}\n                        key={i}\n                    >\n                        {/* <Link to={{\n                            pathname:`articles/${i}`,\n                            state: {\n                                data:item\n                            }\n                        }}> */}\n                            <div className={style.flex_wrapper} onClick={()=> this.handleOpenModal(item)}>\n                                <div className={style.left}\n                                    style={{\n                                        background: `url(${item.urlToImage})`\n                                    }}>\n                                    <div></div>\n                                </div>\n                                <div className={style.right} >\n                                    <ListInfo provider={item.source.name} date={item.publishedAt}/>\n                                    <h2>{item.title}</h2>\n                                </div>\n                            </div>\n                        {/* </Link> */}\n                    </CSSTransition>\n                ))\n                break;\n            default:\n                template=null;\n        }\n        return template;\n    }\n\n    render() {\n        let header;\n        let body;\n        if(this.state.clickedItem.content == null){\n            body = this.state.clickedItem.description\n        }else{\n            body = this.state.clickedItem.content\n        }\n        if(this.state.clickedItem.author == null){\n            header = <Header \n            date={this.state.clickedItem.publishedAt}\n            source={this.state.clickedItem.source}\n            author='N/A'\n            title={this.state.clickedItem.title}\n            url={this.state.clickedItem.url}\n            />\n        }else{\n            header = <Header \n            date={this.state.clickedItem.publishedAt}\n            source={this.state.clickedItem.source}\n            author={this.state.clickedItem.author}\n            title={this.state.clickedItem.title}\n            url={this.state.clickedItem.url}\n            />\n        }\n        return(\n            <div>\n                <ReactModal\n                    isOpen={this.state.showModal}\n                    contentLabel=\"Minimal Modal Example\"\n                >\n                    <button onClick={this.handleCloseModal}>Close</button>\n                    <div className={style.articleWrapper}>\n                        {header}\n                        <div className={style.articleBody}>\n                            <h1>{this.state.clickedItem.title}</h1>\n                            <div className={style.articleImage}\n                                style={{\n                                    background: `url(${this.state.clickedItem.urlToImage})`\n                                }}\n                            ></div>\n                            <div className={style.articleText}>\n                                {body}\n                            </div>\n                        </div>\n                    </div>\n                </ReactModal>\n\n                <TransitionGroup\n                    component=\"div\"\n                    className=\"list\"\n                >\n                    { this.renderNews( this.props.type )}\n                </TransitionGroup>\n                <Button\n                    type=\"loadmore\"\n                    loadMore={()=>this.loadMore()}\n                    cta=\"Load More News\"\n                />\n            </div>\n        )\n    }\n}\n\nexport default NewsList;"]},"metadata":{},"sourceType":"module"}