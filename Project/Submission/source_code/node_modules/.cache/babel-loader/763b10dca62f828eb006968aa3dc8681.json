{"ast":null,"code":"import _objectSpread from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import styles from'./signin.module.css';import{firebase}from'../../firebase';import FormField from'../widgets/FormFields/formFields';var SignIn=/*#__PURE__*/function(_Component){_inherits(SignIn,_Component);var _super=_createSuper(SignIn);function SignIn(){var _this;_classCallCheck(this,SignIn);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={registerError:'',loading:false,formdata:{email:{element:'input',value:'',config:{name:'email_input',type:'email',placeholder:'Enter your email'},validation:{required:true,email:true},valid:false,touched:false,validationMessage:''},password:{element:'input',value:'',config:{name:'password_input',type:'password',placeholder:'Enter your password'},validation:{required:true,password:true},valid:false,touched:false,validationMessage:''}}};_this.updateForm=function(element){var newFormdata=_objectSpread({},_this.state.formdata);var newElement=_objectSpread({},newFormdata[element.id]);newElement.value=element.event.target.value;if(element.blur){var validData=_this.validate(newElement);newElement.valid=validData[0];newElement.validationMessage=validData[1];}newElement.touched=element.blur;newFormdata[element.id]=newElement;_this.setState({formdata:newFormdata});};_this.validate=function(element){var error=[true,''];if(element.validation.email){var valid=/\\S+@\\S+\\.\\S+/.test(element.value);var message=\"\".concat(!valid?'Must be a valid email':'');error=!valid?[valid,message]:error;}if(element.validation.password){var _valid=element.value.length>=5;var _message=\"\".concat(!_valid?'Must be greater than 5':'');error=!_valid?[_valid,_message]:error;}if(element.validation.required){var _valid2=element.value.trim()!=='';var _message2=\"\".concat(!_valid2?'This field is required':'');error=!_valid2?[_valid2,_message2]:error;}return error;};_this.submitForm=function(event,type){event.preventDefault();if(type!==null){var dataToSubmit={};var formIsValid=true;for(var key in _this.state.formdata){dataToSubmit[key]=_this.state.formdata[key].value;}for(var _key2 in _this.state.formdata){formIsValid=_this.state.formdata[_key2].valid&&formIsValid;}if(formIsValid){_this.setState({loading:true,registerError:''});if(type){firebase.auth().signInWithEmailAndPassword(dataToSubmit.email,dataToSubmit.password).then(function(){_this.props.history.push('/');}).catch(function(error){_this.setState({loading:false,registerError:error.message});});}else{firebase.auth().createUserWithEmailAndPassword(dataToSubmit.email,dataToSubmit.password).then(function(){_this.props.history.push('/');}).catch(function(error){_this.setState({loading:false,registerError:error.message});});}}}};_this.submitButton=function(){return _this.state.loading?'loading...':/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(event){return _this.submitForm(event,false);}},\" Register now\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(event){return _this.submitForm(event,true);}},\" Log in \"));};_this.showError=function(){return _this.state.registerError!==''?/*#__PURE__*/React.createElement(\"div\",{className:styles.error},_this.state.registerError):'';};return _this;}_createClass(SignIn,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",{className:styles.logContainer},/*#__PURE__*/React.createElement(\"form\",{onSubmit:function onSubmit(event){return _this2.submitForm(event,null);}},/*#__PURE__*/React.createElement(\"h2\",null,\"Register / Log in\"),/*#__PURE__*/React.createElement(FormField,{id:'email',formdata:this.state.formdata.email,change:function change(element){return _this2.updateForm(element);}}),/*#__PURE__*/React.createElement(FormField,{id:'password',formdata:this.state.formdata.password,change:function change(element){return _this2.updateForm(element);}}),this.submitButton(),this.showError()));}}]);return SignIn;}(Component);export default SignIn;","map":{"version":3,"sources":["/Users/heesoopark/Desktop/myprj/src/components/Signin/signin.js"],"names":["React","Component","styles","firebase","FormField","SignIn","state","registerError","loading","formdata","email","element","value","config","name","type","placeholder","validation","required","valid","touched","validationMessage","password","updateForm","newFormdata","newElement","id","event","target","blur","validData","validate","setState","error","test","message","length","trim","submitForm","preventDefault","dataToSubmit","formIsValid","key","auth","signInWithEmailAndPassword","then","props","history","push","catch","createUserWithEmailAndPassword","submitButton","showError","logContainer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styles from './signin.module.css';\nimport { firebase } from '../../firebase';\n\nimport FormField from '../widgets/FormFields/formFields';\n\nclass SignIn extends Component {\n\n    state = {\n        registerError:'',\n        loading:false,\n        formdata:{\n            email:{\n                element:'input',\n                value:'',\n                config:{\n                    name:'email_input',\n                    type:'email',\n                    placeholder:'Enter your email'\n                },\n                validation:{\n                    required:true,\n                    email:true\n                },\n                valid:false,\n                touched:false,\n                validationMessage:''\n            },\n            password:{\n                element:'input',\n                value:'',\n                config:{\n                    name:'password_input',\n                    type:'password',\n                    placeholder:'Enter your password'\n                },\n                validation:{\n                    required:true,\n                    password:true\n                },\n                valid:false,\n                touched:false,\n                validationMessage:''\n            }\n        }\n    }\n\n    updateForm = (element) => {\n        const newFormdata = {\n            ...this.state.formdata\n        }\n        const newElement = {\n            ...newFormdata[element.id]\n        }\n        newElement.value = element.event.target.value;\n        if(element.blur){\n            let validData = this.validate(newElement);\n            newElement.valid = validData[0];\n            newElement.validationMessage = validData[1];   \n        }\n        newElement.touched = element.blur;\n        newFormdata[element.id] = newElement;\n        \n        this.setState({\n            formdata:newFormdata\n        })\n    }\n\n    validate = (element) => {\n        let error = [true,''];\n\n        if(element.validation.email){\n            const valid = /\\S+@\\S+\\.\\S+/.test(element.value);\n            const message = `${!valid ? 'Must be a valid email':''}`;\n            error = !valid ? [valid,message] : error\n        }\n\n        if(element.validation.password){\n            const valid = element.value.length >= 5;\n            const message = `${!valid ? 'Must be greater than 5':''}`;\n            error = !valid ? [valid,message] : error\n        }\n\n        if(element.validation.required){\n            const valid = element.value.trim() !=='';\n            const message = `${!valid ? 'This field is required':''}`;\n            error = !valid ? [valid,message] : error\n        }\n\n        return error;\n    }\n\n    submitForm = (event,type) => {\n        event.preventDefault();\n\n        if(type !== null){\n\n            let dataToSubmit = {};\n            let formIsValid = true;\n\n            for(let key in this.state.formdata){\n                dataToSubmit[key] = this.state.formdata[key].value\n            }\n            for(let key in this.state.formdata){\n                formIsValid = this.state.formdata[key].valid && formIsValid;\n            }\n\n            if(formIsValid){\n                this.setState({\n                    loading:true,\n                    registerError:''\n                })\n                if(type){\n                    firebase.auth()\n                    .signInWithEmailAndPassword(\n                        dataToSubmit.email,\n                        dataToSubmit.password\n                    ).then(()=>{\n                        this.props.history.push('/')\n                    }).catch( error =>{\n                        this.setState({\n                            loading:false,\n                            registerError: error.message\n                        })\n                    })\n\n                } else {\n                    firebase.auth()\n                    .createUserWithEmailAndPassword(\n                        dataToSubmit.email,\n                        dataToSubmit.password\n                    ).then(()=>{\n                        this.props.history.push('/')\n                    }).catch( error =>{\n                        this.setState({\n                            loading:false,\n                            registerError: error.message\n                        })\n                    })\n                }\n            }\n        }\n\n\n    }\n\n\n    submitButton = () => (\n        this.state.loading ? \n            'loading...'\n        :\n        <div>\n            <button onClick={(event)=>this.submitForm(event,false)}> Register now</button>\n            <button onClick={(event)=>this.submitForm(event,true)}> Log in </button>\n        </div>\n    )\n\n    showError = () => (\n        this.state.registerError !== '' ? \n            <div className={styles.error}>{this.state.registerError}</div>\n        : ''\n    )\n\n    render(){\n        return(\n            <div className={styles.logContainer}>\n                <form onSubmit={(event)=>this.submitForm(event,null)}>\n                    <h2>Register / Log in</h2>\n\n                    <FormField\n                        id={'email'}\n                        formdata={this.state.formdata.email}\n                        change={(element)=>this.updateForm(element)}\n                    />\n                    <FormField\n                        id={'password'}\n                        formdata={this.state.formdata.password}\n                        change={(element)=>this.updateForm(element)}\n                    />\n\n                    { this.submitButton() }\n                    { this.showError() }\n                </form>\n            </div>\n        )\n    }\n\n}\n\nexport default SignIn;"]},"metadata":{},"sourceType":"module"}