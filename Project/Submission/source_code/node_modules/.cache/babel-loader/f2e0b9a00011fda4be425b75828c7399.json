{"ast":null,"code":"import _toConsumableArray from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/heesoopark/Desktop/myprj/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{useState,useEffect,Component}from'react';import{firebase}from'../../firebase';import style from'./posts.module.css';import PostInfo from'./postinfo';import{CSSTransition,TransitionGroup}from'react-transition-group';import Header from'./postHeader';import ReactModal from'react-modal';import parse from'html-react-parser';var Posts=/*#__PURE__*/function(_Component){_inherits(Posts,_Component);var _super=_createSuper(Posts);function Posts(){var _this;_classCallCheck(this,Posts);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={posts:[],showModal:false,clickedItem:[],body:'',imageURL:''};_this.getAuthor=function(){var template=null;template=_this.state.posts.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",null,item.author);});return template;};_this.getTitle=function(){var template=null;template=_this.state.posts.map(function(item,i){return/*#__PURE__*/React.createElement(\"div\",null,item.title);});return template;};_this.getPosts=function(){var template=null;template=_this.state.posts.map(function(item,i){return/*#__PURE__*/React.createElement(CSSTransition,{classNames:{enter:style.postList_wrapper,enterActive:style.postList_wrapper_enter},timeout:500,key:i},/*#__PURE__*/React.createElement(\"div\",{className:style.postlist_item,onClick:function onClick(){return _this.handleOpenModal(item);}},/*#__PURE__*/React.createElement(PostInfo,{author:item.author,title:item.title}),/*#__PURE__*/React.createElement(\"h2\",null,item.title)));});return template;};_this.getImageURL=function(filename){firebase.storage().ref('images').child(filename).getDownloadURL().then(function(url){_this.setState({imageURL:url});});};return _this;}_createClass(Posts,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this.handleOpenModal=this.handleOpenModal.bind(this);this.handleCloseModal=this.handleCloseModal.bind(this);firebase.firestore().collection('posts').get().then(function(querySnapshot){querySnapshot.forEach(function(documentSnapshot){_this2.setState(function(prevState){return{posts:[].concat(_toConsumableArray(prevState.posts),[documentSnapshot.data()])};});});});}},{key:\"handleOpenModal\",value:function handleOpenModal(item){this.getImageURL(item.image);this.setState({clickedItem:item});this.setState({body:item.body});this.setState({showModal:true});}},{key:\"handleCloseModal\",value:function handleCloseModal(){this.setState({showModal:false});}},{key:\"render\",value:function render(){var header;var body;header=/*#__PURE__*/React.createElement(Header,{author:this.state.clickedItem.author,title:this.state.clickedItem.title});if(this.state.clickedItem.image==\"\"){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactModal,{isOpen:this.state.showModal,contentLabel:\"Post Listing\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleCloseModal},\"Close\"),/*#__PURE__*/React.createElement(\"div\",{className:style.articlewrapper},header,/*#__PURE__*/React.createElement(\"div\",{className:style.articleBody},/*#__PURE__*/React.createElement(\"h1\",null,this.state.clickedItem.title)),/*#__PURE__*/React.createElement(\"div\",{className:style.articleText},parse(this.state.body)))),/*#__PURE__*/React.createElement(TransitionGroup,{component:\"div\",className:\"list\"},this.getPosts()));}else{return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(ReactModal,{isOpen:this.state.showModal,contentLabel:\"Post Listing\"},/*#__PURE__*/React.createElement(\"button\",{onClick:this.handleCloseModal},\"Close\"),/*#__PURE__*/React.createElement(\"div\",{className:style.articlewrapper},header,/*#__PURE__*/React.createElement(\"div\",{className:style.articleBody},/*#__PURE__*/React.createElement(\"h1\",null,this.state.clickedItem.title),/*#__PURE__*/React.createElement(\"div\",{className:style.articleImage,style:{height:700,background:\"url(\".concat(this.state.imageURL,\")\")}})),/*#__PURE__*/React.createElement(\"div\",{className:style.articleText},parse(this.state.body)))),/*#__PURE__*/React.createElement(TransitionGroup,{component:\"div\",className:\"list\"},this.getPosts()));}}}]);return Posts;}(Component);export default Posts;","map":{"version":3,"sources":["/Users/heesoopark/Desktop/myprj/src/components/Posts/posts.js"],"names":["React","useState","useEffect","Component","firebase","style","PostInfo","CSSTransition","TransitionGroup","Header","ReactModal","parse","Posts","state","posts","showModal","clickedItem","body","imageURL","getAuthor","template","map","item","i","author","getTitle","title","getPosts","enter","postList_wrapper","enterActive","postList_wrapper_enter","postlist_item","handleOpenModal","getImageURL","filename","storage","ref","child","getDownloadURL","then","url","setState","bind","handleCloseModal","firestore","collection","get","querySnapshot","forEach","documentSnapshot","prevState","data","image","header","articlewrapper","articleBody","articleText","articleImage","height","background"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, Component } from 'react';\nimport { firebase } from '../../firebase';\nimport style from './posts.module.css';\nimport PostInfo from './postinfo';\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\nimport Header from './postHeader';\nimport ReactModal from 'react-modal';\nimport parse from 'html-react-parser';\n\nclass Posts extends Component {\n\n    state ={\n        posts : [],\n        showModal: false,\n        clickedItem: [],\n        body:'',\n        imageURL:''\n    }\n\n    componentWillMount(){\n        this.handleOpenModal = this.handleOpenModal.bind(this);\n        this.handleCloseModal = this.handleCloseModal.bind(this);\n        firebase.firestore().collection('posts')\n        .get()\n        .then(querySnapshot => {\n            querySnapshot.forEach(documentSnapshot => {\n                this.setState(prevState => ({\n                    posts: [...prevState.posts, documentSnapshot.data()]\n                }))\n            })\n        })\n    }\n\n    handleOpenModal(item) {\n        this.getImageURL(item.image)\n        this.setState({clickedItem: item})\n        this.setState({body: item.body})\n        this.setState({showModal: true})\n    }\n    handleCloseModal() {\n        this.setState({showModal: false})\n    }\n\n    getAuthor = () => {\n        let template = null;\n        template = this.state.posts.map( (item, i) => (\n            <div>\n                {item.author}\n            </div>\n        ))\n        return template; \n    }\n\n    getTitle = () => {\n        let template = null;\n        template = this.state.posts.map( (item, i) => (\n            <div>  \n               {item.title}\n            </div>\n        ))\n        return template; \n    }\n\n    getPosts = () => {\n        let template = null;\n        template = this.state.posts.map( (item, i) => (\n        <CSSTransition\n            classNames={{\n                enter:style.postList_wrapper,\n                enterActive:style.postList_wrapper_enter\n            }}\n            timeout={500}\n            key={i}\n        >\n            <div className={style.postlist_item} onClick={() => this.handleOpenModal(item)}>\n                <PostInfo author={item.author} title={item.title}/>\n                <h2>{item.title}</h2>\n            </div>\n        </CSSTransition>\n        ))\n        return template;\n    }\n\n\n    getImageURL = (filename) => {\n        firebase.storage().ref('images')\n        .child(filename).getDownloadURL()\n        .then(url => {\n            this.setState({\n                imageURL: url\n            })\n        })\n    }\n\n    render() {\n        let header;\n        let body;\n        header = <Header\n            author={this.state.clickedItem.author}\n            title={this.state.clickedItem.title}\n        />\n        if(this.state.clickedItem.image == \"\") {\n            return( \n\n                    <div>\n                        <ReactModal\n                            isOpen={this.state.showModal}\n                            contentLabel=\"Post Listing\"\n                        >\n                            <button onClick={this.handleCloseModal}>Close</button>\n                            <div className={style.articlewrapper}>\n                                {header}\n                                <div className={style.articleBody}>\n                                    <h1>{this.state.clickedItem.title}</h1>\n                                </div>\n                                <div className={style.articleText}>\n                                    {parse(this.state.body)}\n                                    {/* {this.state.body} */}\n                                </div>\n                            </div>\n                        </ReactModal>\n                        <TransitionGroup\n                            component=\"div\"\n                            className=\"list\"\n                        >\n        \n                        {this.getPosts()}\n                        </TransitionGroup>\n                    </div>\n                \n            )\n        }else{\n            return(\n                <div>\n                    <ReactModal\n                        isOpen={this.state.showModal}\n                        contentLabel=\"Post Listing\"\n                    >\n                        <button onClick={this.handleCloseModal}>Close</button>\n                        <div className={style.articlewrapper}>\n                            {header}\n                            <div className={style.articleBody}>\n                                <h1>{this.state.clickedItem.title}</h1>\n                                <div className={style.articleImage}\n                                    style={{\n                                        height: 700,\n                                        background: `url(${this.state.imageURL})`\n                                    }}\n                                >\n                                </div>\n                            </div>\n                            <div className={style.articleText}>\n                                {parse(this.state.body)}\n                            </div>\n                        </div>\n                    </ReactModal>\n                    <TransitionGroup\n                        component=\"div\"\n                        className=\"list\"\n                    >\n    \n                    {this.getPosts()}\n                    </TransitionGroup>\n                </div>\n            )   \n        }\n    }\n}\nexport default Posts;"]},"metadata":{},"sourceType":"module"}